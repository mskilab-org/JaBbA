language: r
sudo: false
cache: packages
r: 3.6.1
warnings_are_errors: false
r_check_args: "--no-build-vignettes --no-manual --as-cran --no-examples"
bioc_packages:
- GenomeInfoDb
- S4Vectors
- GenomicRanges
- VariantAnnotation
- DNAcopy
- rtracklayer
- Rsamtools
before_install:
- curl -OL $URL
- mv jabba.tar.gz.gpg?dl=0 jabba.tar.gz.gpg
- echo $JAB | sudo gpg --passphrase-fd 0 jabba.tar.gz.gpg
- mkdir $HOME/my.cplex && tar -xvzf jabba.tar.gz --directory $HOME/my.cplex/
- wget https://github.com/samtools/samtools/releases/download/1.6/samtools-1.6.tar.bz2
- tar -vxjf samtools-1.6.tar.bz2
- cd samtools-1.6
- make
- cd ..
- export PATH=samtools-1.6/:$PATH
- curl -OL https://raw.githubusercontent.com/craigcitro/r-travis/master/scripts/travis-tool.sh
- chmod 755 ./travis-tool.sh
install:
- ./travis-tool.sh install_github mskilab/bamUtils
- ./travis-tool.sh install_github mskilab/gUtils
- ./travis-tool.sh install_github mskilab/gTrack
- ./travis-tool.sh install_github mskilab/gGnome
script:
- "Rscript -e 'devtools::install_bioc(\"copynumber\")'"
- "Rscript -e 'setRepositories(graphics = FALSE, ind = 1:6);install.packages(\"sequenza\")'"
- "Rscript -e 'devtools::install()'"
- "./travis-tool.sh run_tests"
after_failure:
- "./travis-tool.sh dump_logs"
after_success:
- travis_wait Rscript -e 'covr::codecov()'
env:
  global:
  - secure: "dzCiDGDvdIgj3hVZqvPa1AWpfcyTUjNVy47kNawlM6QwF1y1y8iXj53CkRTVbDA/5ndbEHiUcGivlEhU2Jz6pA3Rej/KDpGOzDgygg8GiRF1M4npSD+Iva7WtCNU7VorRn4b4objui/KpuhivxDjxOsq62/PzvJH6LCVni9C/V2Y5mDnlV1ljS1xLdhjP5EMIq800ZjA/jdCgtbcFZDFL0HMeQKV3XyFhRoE7K8Hk8LBjNZQkIxrHunlxjZkHsRSBZtCSzncnqpUsl/qEXEVKyw8GSODLSOkaI4xxGWkO+lmJYiZIQFwtUxzwC9WHrIs1tbKU8UkFBTD+vdGxLt7DcvVCHvGkUnOMOJb697R5qeaQ5zwpksfl0wdvg2IQ4cha1nhUDsPv1DoCFqMSx2oD+cSwMsyacMiIsPEnzKP3GWrR+2ay7+6qMN+OIEhdvGy/vnKs5EcNr+TD/s/SyHjQz03vZa2K/8kJ38UxiuJpX3TS8dMd0IJWdxGfWwzKjEf8jx5Ivcsi5ja+mPgqfMWrt2XSJZ4kBPWRkSeBvEhzQ94OG5r+k1I2sJyr9zmmJQmsNKbL8utfaoga3LFVERHR0FCOU7TmTfeCAKABRrKu66ZFSLk/6SuNHw8Kq+Pc0II/fryrC18jYeB5aKcXc7KDNr9OicWsa93JkN5Qji8R2E="
  - secure: "ueMn8wdpbKYhiP16MHLK3UmWQmNg44+7nivVALK6CLTvuTn3w7jRwGUIxa3Zb8YRprTFn7XwlqNjL7H6SLCnhk631Nvprb9u9ZzcX+v3qPJnRdkG4X5nSEXnd0fv4fmUiNi0pmT9ONA9FUmVhdxk2CIq++KYiNi8ugIGcl/hvqK8Zp7Hn5XxLL5VU1nrQXBWSeAcGJtvNfjYGofyeJuRmbcQi0DdtCHj1mkt7VolGE8jOigWj6kKc0EfBCClv9y2SxMwu8AMKDvLH1eJEHzMuEDdA7v5mZOakpsUZErZTowTKYhv8jkqBAfdGgZlMVkZpTD/yu+pNx96xIPVC15OExE8DkbrbwCpzVTtjWiWgw8O1OH68q/agaRhNAICm/r+MVoad1yDN1TACkX0LjLC6VTTPM2OKJDzN5gI9sEa5Ky2PYYHRIPfnwkJ9BzuFlxrSfy9a6bY3ycRhON4sNu24tzkbVCNml866WpaSYbUbk7h/MBLBcmUiF3mcAmkfMXamKA6jiZDYxRxiiFE0CimBIgxqGYzTT3KVJoEQc4d33MM5QRuXU76i4xrzd2KuQrGSQOIi/wqE/vNzm3OTK6fIETFANj4jxNMDRsKczKn7SYooYpFXEbyir59O/aCe6rcG9nkY9F4TZhz4ar6VpXQy6us4VLslQ/LIOCReefQxQc="
  - CPLEX_DIR=$HOME/my.cplex/
  - CPLEX_INCLUDE_PATH=$HOME/my.cplex/include
  - CPLEX_LIB_PATH=$HOME/my.cplex/lib
  - R_CHECK_ARGS="--no-build-vignettes --no-manual --as-cran --no-examples"
  - _R_CHECK_TESTS_NLINES_=0
  - R_REMOTES_NO_ERRORS_FROM_WARNINGS=TRUE
  - _R_CHECK_FORCE_SUGGESTS_=false


